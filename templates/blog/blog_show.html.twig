{% extends "base.html.twig" %}

{% block title %}
    BlogSymfony | Details de l'article
{% endblock %}

{% block body %}
<h1 class="text-center my-5">Détails de {{article.titre}}</h1>
{# Cet objet 'article' ne sort pas de nulle part, c'est ce que le controller a transmit au template, c'est à dire les informations d'un article sélectionné en BDD en fonction de l'ID transmit dans l'url#}
{{dump(article)}}

{# Affichage des messages utilisateurs stockés en session (addFlash dans le controller) #}
{# app: objet twig qui contient toutes les informations de la session en cours #}
{% for message in app.flashes('success') %}
<div class="col-6 mx-auto text-center alert alert-success">{{message}}</div>
{% endfor %}

 {% if article.photo != null %}
    {% set col = 8 %} {# set permet de déclarer des variables en TWIG #}
  {% else %}
    {% set col = 12 %}
  {% endif %}

<div class="col-md-12">
      <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm position-relative">
        <div class="col {{ col }} p-4 d-flex flex-column position-static">
          <strong class="d-inline-block mb-2 text-primary">World</strong>
          <h3 class="mb-0">Featured post</h3>
          <div class="mb-1 text-muted">{{article.date|date('d/m/Y')}}</div>
          <p class="card-text mb-auto">{{article.contenu|striptags}}</p>

          <p class="mt-3"> 
            <a href="{{path('blog_edit', {'id': article.id})}}" class="btn btn-dark">Modifier</a>
            <a href="#" class="btn btn-dark">Imprimer</a>
          </p>

        </div>

         {% if article.photo != null %}
          <div class="col-auto d-none d-lg-block">
            <img src="{{ asset('uploads/photos/' ~ article.photo)}}" alt="{{article.titre}}" class="col-12 img-responsive">
          </div>
        {% endif %}
        
      </div>
    </div>

{% endblock %}